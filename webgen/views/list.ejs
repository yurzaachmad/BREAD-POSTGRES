<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Challenge 21</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body>
    <br>
    <br>
    <h1 class="text-center">BREAD(Browse, Read, Edit, Delete)</h1>
    <br>
    <br>
    <div class="container">
    <form>
      <div class="row mb-3">
        <input type="hidden" name="page" value="1">
        <label for="id" class="col-sm-2 col-form-label">id</label>
        <div class="col-sm-10">
          <input type="checkbox" id="id" name="id1" value="id" <% if (query.id) { %>checked<% } %>
        <% if (!query.id) { %><% } %> />
        <input type="number" class="form-control" name="id" value="<%= query.id%>" />
        </div>
      </div>
      <div class="row mb-3">
        <label for="string" class="col-sm-2 col-form-label">String</label>
        <div class="col-sm-10">
          <input type="checkbox" id="string" name="string1" value="string" <% if (query.string) { %>checked<% } %>
        <% if (!query.string) { %><% } %> />
        <input type="text" class="form-control" name="string" value="<%= query.string%>" />
        </div>
      </div>
      <div class="row mb-3">
        <label for="integer" class="col-sm-2 col-form-label">Integer</label>
        <div class="col-sm-10">
          <input type="checkbox" id="integer" name="integer1" value="integer" <% if (query.integer) { %>checked<% } %>
        <% if (!query.integer) { %><% } %> />
        <input type="number" class="form-control" name="integer" value="<%= query.integer%>" />
        </div>
      </div>
      <div class="row mb-3">
        <label for="float" class="col-sm-2 col-form-label">Float</label>
        <div class="col-sm-10">
          <input type="checkbox" id="float" name="float1" value="float" <% if (query.float) { %>checked<% } %>
        <% if (!query.float) { %><% } %> />
        <input type="number" class="form-control" name="float" value="<%= query.float%>" />
        </div>
      </div>
      <div class="row mb-3">
        <label for="date" class="col-sm-2 col-form-label">Date</label>
        <div class="col-sm-10">
          <input type="checkbox" id="date" name="date1" value="date"<% if (query.dateS) { %>checked<% } %>
        <% if (!query.dateS) { %><% } %> />
        <input type="date" class="form-control" name="dateS" value="<%= query.dateS%>" />
        <small>to</small>
        <input type="date" class="form-control" name="dateE" value="<%= query.dateE%>" />
        </div>
      </div>
      <div>
        <label for="boolean">Boolean</label>
        <br>
        <input
          type="checkbox"
          id="boolean"
          name="boolean1"
          value="true"
          <% if (query.boolean) { %>checked<% } %>
          <% if (!query.boolean) { %><% } %>
        />
        <select class="form-select" id="boolean" name="boolean">
          <option value="" <% if (!query.boolean) { %>selected<% } %>>-- Select --</option>
          <option value="true" <% if (query.boolean === 'true') { %>selected<% } %>>True</option>
          <option value="false" <% if (query.boolean === 'false') { %>selected<% } %>>False</option>
        </select>
      </div>
      <br>
      <button type="submit" class="btn btn-primary">Cari</button>
      <a href="/" class="btn btn-warning">Reset</a>
    </form>
      <br />
      <br />
      <table class="table table-striped">
        <thead>
          <tr>
            <th>
              <!-- <input type="hidden" name="page" value="1"> -->
              <a href="<%= url.split('&').filter(param => !/^sortOrder=|^sortBy=/.test(param)).join('&') %>&sortOrder=asc&sortBy=id">&#9650;</a>
              <a href="<%= url.split('&').filter(param => !/^sortOrder=|^sortBy=/.test(param)).join('&') %>&sortOrder=desc&sortBy=id">&#9660;</a>
               &nbsp; ID &nbsp;
            </th>
            <th>
              <a href="<%= url.split('&').filter(param => !/^sortOrder=|^sortBy=/.test(param)).join('&') %>&sortOrder=asc&sortBy=string">&#9650;</a>
              <a href="<%= url.split('&').filter(param => !/^sortOrder=|^sortBy=/.test(param)).join('&') %>&sortOrder=desc&sortBy=string">&#9660;</a>
              &nbsp; String &nbsp;
            </th>
            <th>
              <a href="<%= url.split('&').filter(param => !/^sortOrder=|^sortBy=/.test(param)).join('&') %>&sortOrder=asc&sortBy=integer">&#9650;</a>
              <a href="<%= url.split('&').filter(param => !/^sortOrder=|^sortBy=/.test(param)).join('&') %>&sortOrder=desc&sortBy=integer">&#9660;</a>
              &nbsp; Integer &nbsp;
            </th>
            <th>
              <a href="<%= url.split('&').filter(param => !/^sortOrder=|^sortBy=/.test(param)).join('&') %>&sortOrder=asc&sortBy=float">&#9650;</a>
              <a href="<%= url.split('&').filter(param => !/^sortOrder=|^sortBy=/.test(param)).join('&') %>&sortOrder=desc&sortBy=float">&#9660;</a>
              &nbsp; Float &nbsp;
            </th>
            <th>
              <a href="<%= url.split('&').filter(param => !/^sortOrder=|^sortBy=/.test(param)).join('&') %>&sortOrder=asc&sortBy=date">&#9650;</a>
              <a href="<%= url.split('&').filter(param => !/^sortOrder=|^sortBy=/.test(param)).join('&') %>&sortOrder=desc&sortBy=date">&#9660;</a>
              &nbsp; Date &nbsp;
            </th>
            <th>
              <a href="<%= url.split('&').filter(param => !/^sortOrder=|^sortBy=/.test(param)).join('&') %>&sortOrder=asc&sortBy=boolean">&#9650;</a>
              <a href="<%= url.split('&').filter(param => !/^sortOrder=|^sortBy=/.test(param)).join('&') %>&sortOrder=desc&sortBy=boolean">&#9660;</a>
              &nbsp; Boolean &nbsp;
            </th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <% data.forEach((item, index) => { %>
          <tr>
            <td><%= item.id %></td>
            <td><%= item.string %></td>
            <td><%= item.integer %></td>
            <td><%= item.float %></td>
            <td><%= moment(item.date).format('DD MMM YYYY') %></td>
            <td><%= item.boolean %></td>
            <td>
              <a href="/edit/<%= item.id %>"
                ><button class="btn btn-success" type="button">Edit</button></a
              >
              <span></span
              ><a href="/delete/<%= item.id %>"
                ><button class="btn btn-danger" type="button">Delete</button></a
              >
            </td>
          </tr>
          <%})%>
        </tbody>
      </table>
      <nav aria-label="...">
        <ul class="pagination">
          <% if (page > 1) { %>
          <li class="page-item">
            <a class="page-link" href="<%= url.replace(`page=${page}`, `page=${page-1}`) %>">Previous</a>
          </li>
          <% } %>
          <% for( let i = 1; i <= pages; i++ ) { %>
          <li class="page-item">
            <a class="page-link<%= page == i ? ' active' : '' %>" href="<%= url.replace(`page=${page}`, `page=${i}`) %>"><%=i %></a>
          </li>
          <% } %>
          <% if (page < pages) { %>
          <li class="page-item">
            <a class="page-link" href="<%= url.replace(`page=${parseInt(page)}`, `page=${parseInt(page)+1}`) %>">Next</a>
          </li>
          <% } %>
        </ul>
      </nav>
      <br />
      <span></span>
      <a href="/add"
        ><button class="btn btn-primary" type="button">Add</button></a
      >
    </div>
  </body>
</html>
